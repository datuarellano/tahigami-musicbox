(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(r){if(r.ep)return;r.ep=!0;const t=a(r);fetch(r.href,t)}})();console.log("Tahigami Music Box D1-40 - JavaScript loaded");document.addEventListener("DOMContentLoaded",()=>{const u=document.querySelectorAll(".tab-button"),i=document.querySelectorAll(".tab-pane");u.forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-tab");u.forEach(d=>d.classList.remove("active")),i.forEach(d=>d.classList.remove("active")),e.classList.add("active");const n=document.getElementById(o);n&&n.classList.add("active")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(o){o.preventDefault();const n=document.querySelector(this.getAttribute("href"));n&&n.scrollIntoView({behavior:"smooth",block:"start"})})});const a=document.querySelector(".nav");window.addEventListener("scroll",()=>{window.pageYOffset>100?a.style.backgroundColor="rgba(255, 255, 255, 0.98)":a.style.backgroundColor="rgba(255, 255, 255, 0.95)"});const c=document.getElementById("lightbox"),r=c.querySelector(".lightbox-inner img"),t=Array.from(document.querySelectorAll(".lightbox-trigger")),l=c.querySelector(".lightbox-close"),b=c.querySelector(".lightbox-next"),y=c.querySelector(".lightbox-prev");let s=0;function p(e){const o=e.getAttribute("srcset");if(!o)return e.src;const n=o.split(",").map(L=>L.trim()).filter(Boolean);return n[n.length-1].split(" ")[0]||e.src}function f(e){const o=e.dataset.full;return o&&(o.startsWith("/")||o.includes("assets/")||o.match(/^https?:\/\//))?o:p(e)}function v(e){const o=t[e],n=f(o)||o.src;r.src=n,r.alt=o.alt||"",c.classList.add("open"),c.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",s=e,l.focus()}function g(){c.classList.remove("open"),c.setAttribute("aria-hidden","true"),document.body.style.overflow="",r.src="",t[s]?.focus()}function h(){s=(s+1)%t.length;const e=f(t[s])||t[s].src;r.src=e,r.alt=t[s].alt||""}function m(){s=(s-1+t.length)%t.length;const e=f(t[s])||t[s].src;r.src=e,r.alt=t[s].alt||""}t.forEach((e,o)=>e.addEventListener("click",n=>{n.preventDefault(),v(o)})),l.addEventListener("click",g),b.addEventListener("click",h),y.addEventListener("click",m),c.addEventListener("click",e=>{e.target===c&&g()}),document.addEventListener("keydown",e=>{c.classList.contains("open")&&(e.key==="Escape"&&g(),e.key==="ArrowRight"&&h(),e.key==="ArrowLeft"&&m())})});
